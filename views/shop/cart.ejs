<%-include('../includes/head.ejs')%>
</head>
<body>
    <%-include('../includes/navigation.ejs')%>
    <main>
        <%if(cart.length > 0) {%>
            <table class="table" style="width: 100%;">
                <thead>
                <tr>
                    <th>Title</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Total</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                    <% cart.forEach((item) => { %>
                        <tr>
                            <td><%=item.product.title%></td>
                            <td><%=item.product.price%></td>
                            <td><%=item.quantity%></td>
                            <th><%=item.quantity * item.product.price%> MAD</th>
                            <td>
                                <button class="button is-danger is-outlined" style="float: right;" onclick="document.getElementById('deleteFromCart<%=item.product.id%>').submit()">
                                    <span>Delete</span>
                                    <span class="icon is-small">
                                      <i class="fas fa-times"></i>
                                    </span>
                                </button>
                                <form id="deleteFromCart<%=item.product.id%>" action="/delete-from-cart" method="POST">
                                    <input type="hidden" name="productId" value="<%=item.product.id%>">
                                </form>
                            </td>
                        </tr>
                    <%}) %>
                    <tr>
                        <th colspan="3">Total</th>
                        <th><%=totalPrice%> MAD</th>
                    </tr>
                </tbody>
            </table>
        <%} else {%>
            <h1>Cart is empty</h1>
        <%} %>
    </main>
</body> 
</html>